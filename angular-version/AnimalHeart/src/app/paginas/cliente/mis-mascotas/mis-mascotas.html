<app-header-cliente (logout)="logout()"></app-header-cliente>

<section class="client-hero">
  <div class="client-wrap">
    <h1 class="client-hero-title">Mis Mascotas üêæ</h1>
    <p class="lead">Aqu√≠ encuentras toda la informaci√≥n de tus compa√±eros peludos</p>
  </div>
</section>

<main class="client-wrap my-5">   
  <div *ngIf="loading === true" class="loading text-center p-4">Cargando mascotas...</div>
  
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <div *ngIf="!loading && !error" class="row mb-4">
    <div class="col-12 d-flex justify-content-between align-items-center">
      <h2 class="h4 m-0">Tus compa√±eros</h2>
      <span class="pet-badge">{{ mascotas.length }} mascota(s)</span>
    </div>
  </div>

  <div *ngIf="!loading && mascotas.length === 0 && !error" class="empty-pets">
    <i class="bi bi-inbox"></i>
    <h3>No tienes mascotas registradas</h3>
    <p>Ponte en contacto con tu veterinario para registrar a tus compa√±eros peludos</p>
  </div>

  <div class="row g-4" *ngIf="!loading && mascotas.length > 0 && !error">
    <div class="col-12 col-sm-6 col-lg-4" *ngFor="let m of mascotas">
     <a class="pet-card-link" [routerLink]="['/clientes/mascotas', m.id]">
        <div class="pet-card h-100">
          <div class="text-center mb-3">
            <img *ngIf="m.fotoURL; else avatar"
                 [src]="m.fotoURL" [alt]="m.nombre" class="pet-avatar" />
            <ng-template #avatar>
              <img [src]="'https://api.dicebear.com/7.x/bottts/svg?seed=' + m.nombre"
                   [alt]="m.nombre" class="pet-avatar" />
            </ng-template>
          </div>

          <div class="pet-card-body">
            <h3 class="pet-name">{{ m.nombre }}</h3>
            <div class="pet-type">{{ m.tipo }} ‚Ä¢ {{ m.edad }} a√±os</div>

            <div class="pet-info"><strong>Raza:</strong> {{ m.raza }}</div>
            <div class="pet-info"><strong>Peso:</strong> {{ m.peso }} kg</div>
            <div class="pet-info">
              <strong>Enfermedad:</strong> {{ m.enfermedad || 'Ninguna' }}
            </div>
          </div>
        </div>
      </a>
    </div>
  </div>
</main>

<footer class="client-toolbar text-center mt-5 client-footer">
  <div class="client-wrap">
    <p class="mb-0 text-white"><i class="bi bi-c-circle"></i> 2025 ‚Äì Animalheart</p>
  </div>
</footer>