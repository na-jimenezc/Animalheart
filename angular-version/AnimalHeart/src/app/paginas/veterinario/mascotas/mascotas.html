<app-header-vet [veterinario]="veterinario"></app-header-vet>

<div class="container my-4">
  <h1 class="mb-4"><i class="bi bi-heart-pulse me-2"></i>Listado de Pacientes</h1>

  <!-- CARGANDO -->
  <div *ngIf="cargando" class="text-center my-5 py-5">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="mt-3 fs-5">Cargando pacientes...</p>
  </div>

  <!-- TABLA MEJORADA -->
  <div *ngIf="!cargando && mascotas.length > 0">
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th class="p-3 border-0">Foto</th>
            <th class="p-3 border-0">Nombre</th>
            <th class="p-3 border-0">Raza</th>
            <th class="p-3 border-0">Edad</th>
            <th class="p-3 border-0">Tipo</th>
            <th class="p-3 border-0">Enfermedad</th>
            <th class="p-3 border-0">Activo</th>
            <th class="p-3 border-0 text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr app-item-mascota *ngFor="let mascota of mascotas" [mascota]="mascota" 
              class="mb-2" style="border-bottom: 15px solid transparent;"></tr>
        </tbody>
      </table>
    </div>

    <!-- PAGINACIÓN -->
    <div class="d-flex justify-content-between align-items-center mt-5 p-4 bg-light rounded-3">
      <button class="btn btn-outline-primary px-4 py-2" (click)="anterior()" [disabled]="page === 1">
        <i class="bi bi-chevron-left me-2"></i> Anterior
      </button>

      <span class="fs-6 text-dark">
        Página <strong class="text-primary">{{ page }}</strong> de 
        <strong class="text-primary">{{ totalPages }}</strong> 
        | Total: <strong class="text-success">{{ totalElements }}</strong> mascotas
      </span>

      <button class="btn btn-outline-primary px-4 py-2" (click)="siguiente()" [disabled]="page === totalPages">
        Siguiente <i class="bi bi-chevron-right ms-2"></i>
      </button>
    </div>
  </div>

  <!-- SIN MASCOTAS -->
  <div *ngIf="!cargando && todasLasMascotas.length === 0" class="text-center my-5 py-5">
    <div class="card border-0 shadow-sm">
      <div class="card-body py-5">
        <i class="bi bi-inbox display-1 text-muted"></i>
        <h3 class="text-muted mt-3">No hay mascotas registradas</h3>
        <p class="text-muted mb-4">Comienza agregando la primera mascota</p>
        <button class="btn btn-primary">Agregar primera mascota</button>
      </div>
    </div>
  </div>
</div>